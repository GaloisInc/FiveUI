<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Getting Started with FiveUI</title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #dddddd; }
td.sourceCode { padding-left: 5px; }
code > span.kw { font-weight: bold; }
code > span.dt { color: #800000; }
code > span.dv { color: #0000ff; }
code > span.bn { color: #0000ff; }
code > span.fl { color: #800080; }
code > span.ch { color: #ff00ff; }
code > span.st { color: #dd0000; }
code > span.co { color: #808080; font-style: italic; }
code > span.al { color: #00ff00; font-weight: bold; }
code > span.fu { color: #000080; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
	<link rel="stylesheet" type="text/css" href="../css/reset.css" media="all">
  <link rel="stylesheet" type="text/css" href="../css/style.css" media="all">
</head>
<body class="interior">

  <header>
    <div class="wrap">
    <a href="http://galoisinc.github.com/FiveUI" id="logo"
       title="Galois Open Source"><img src="../images/logo.png" alt="Galois" /></a>
    <h2>Open Source</h2>
      <nav id="primary">
        <ul>
          <li><a href="http://galois.com">Company website</a></li>
          <li><a href="https://github.com/GaloisInc/">Github home</a></li>
        </ul>
      </nav><!-- /#primary -->
    </div><!-- /.wrap -->
  </header>

<!-- ///////////////////////////////////////////

  Template Stops Here, Enter Page Content Below 

  //////////////////////////////////////////// -->

  <section id="content">
    <div class="wrap">
<!-- PAGE BODY -->
<div id="pageBodyWrapper"> <div id="pageBody">

<div id="contentWrapper"> <div id="content">
<div id="header">
<h1 class="title">Getting Started with FiveUI</h1>
</div>
<h1 id="getting-started-with-the-fiveui-browser-extension">Getting Started with the FiveUI Browser Extension</h1>
<p>Once FiveUI has been installed, some initial configuration will need to be done to make the extension useful.</p>
<p>The options page allows the user to configure <code>Rule Sets</code> that categorize user interface guidelines into named groups. The options page also allows the user to set a list of <code>URL Patterns</code> that each <code>Rule Set</code> will analyze.</p>
<p><code>Rule Sets</code> define the guidelines, while <code>URL Patterns</code> state where the guidelines should run.</p>
<div class="figure">
<img src="figures/options.png" alt="A Rule Set that will apply to two URL Patterns." /><p class="caption">A Rule Set that will apply to two URL Patterns.</p>
</div>
<h2 id="options-in-chrome">Options in Chrome</h2>
<p>The options page in <code>Chrome</code> can be accessed either through the options link on the extensions page, or through the options item on the context menu off of the FiveUI button (accessed by right-clicking on the FiveUI button in the toolbar).</p>
<h2 id="options-in-firefox">Options in FireFox</h2>
<p>The options page in <code>FireFox</code> can be accessed via the FiveUI gear widget, which should appear next to the FiveUI widget when the addon is installed. Once clicked, a new tab should appear which serves as the options interface for the addon.</p>
<p>The FiveUI Widgets are initially placed on the Firefox <code>Add-on bar</code>, as shown in the figure.</p>
<div class="figure">
<img src="figures/ff-addon-bar.png" alt="FiveUI Widgets in the Firefox Add-on Bar." /><p class="caption">FiveUI Widgets in the Firefox Add-on Bar.</p>
</div>
<h1 id="the-options-page">The Options Page</h1>
<p>The options page allows the user to configure <code>Rule Sets</code> which categorize user interface guidelines into named groups. Once a <code>Rule Set</code> is added, you will be able to set any number of patterns that determine which web pages the <code>Rule Set</code> should evaluate.</p>
<h2 id="rule-sets">Rule Sets</h2>
<p><code>Rule Sets</code> can be managed by clicking on the <code>Rule Sets</code> tab on the left-hand side of the options page.</p>
<p>FiveUI loads <code>Rule Sets</code> from a URL.</p>
<p><code>Rule Sets</code> in FiveUI are specified as a JSON object that contains javascript functions for the rule implementations. Each <code>Rule Set</code> contains a <strong>name</strong>, <strong>description</strong> and list of zero or more <strong>rules</strong>. The following snippet exhibits the minimal definition for a <code>Rule Set</code>, providing only the <strong>name</strong> and <strong>description</strong> fields, along with an empty set of <strong>rules</strong>.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{ <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Empty Rules&quot;</span>
, <span class="st">&quot;description&quot;</span>: <span class="st">&quot;An example of an empty rule set&quot;</span>
, <span class="st">&quot;rules&quot;</span>: []
}</code></pre>
<h3 id="rules">Rules</h3>
<p>The elements of the <strong>rules</strong> array in the <code>Rule Set</code> are just file paths, relative to the path of the manifest file. The contents of the file referenced are javascript, using an exports object to expose the public parts of the rule API.</p>
<p>The required exports of a <strong>rule</strong> file are:</p>
<ol style="list-style-type: decimal">
<li>A rule name, called <code>name</code></li>
<li>A description, called <code>description</code></li>
<li>A function that will be called as the body of the rule, named <code>rule</code></li>
</ol>
<p>As a simple example, the following rule will log an error for each header tag that contains no text:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">exports</span>.<span class="fu">name</span>        = <span class="st">&#39;Disallow Empty Headers&#39;</span>;
<span class="ot">exports</span>.<span class="fu">description</span> = <span class="st">&#39;Heading elements should contain text&#39;</span>;
<span class="ot">exports</span>.<span class="fu">rule</span>        = <span class="kw">function</span>(report) {
  <span class="ot">fiveui</span>.<span class="fu">query</span>(<span class="st">&#39;:header&#39;</span>).<span class="fu">each</span>(<span class="kw">function</span>(ix, elt) {
    <span class="kw">if</span>(<span class="fu">$</span>(elt).<span class="fu">text</span>() == <span class="st">&#39;&#39;</span>) {
      <span class="ot">report</span>.<span class="fu">error</span>(<span class="st">&#39;Heading does not contain text&#39;</span>, elt);
    }
  });
};</code></pre>
<p>Notice that the <code>rule</code> function is given a <code>report</code> argument that has an <code>error</code> method exposed, this is how errors are reported back to the extension from the context of a rule. To report lower-priority issues, <code>report</code> also comes with a <code>warning</code> method. Both <code>error</code> and <code>warning</code> take an explanation of the problem as the first argument, and a reference to the DOM element where the problem appears as the second argument.</p>
<p><code>fiveui.query</code> is a wrapper for the jQuery <code>$()</code> function. In most respects it behaves like jQuery. But it has some special features, which are described in the <a href="../jsdoc/symbols/fiveui.html#.query">javascript documentation</a>.</p>
<h3 id="creating-a-rule-set">Creating a <code>Rule Set</code></h3>
<p>Reusing the previous example and the skeleton of the first, we can create a simple manifest that applies the empty header rule. Enter the following json structure into a file called manifest.json:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{ <span class="st">&quot;name&quot;</span>        : <span class="st">&quot;Header Rule Set&quot;</span>
, <span class="st">&quot;description&quot;</span> : <span class="st">&quot;Simple rules about HTML headers.&quot;</span>
, <span class="st">&quot;rules&quot;</span>       : [ <span class="st">&quot;emptyHeaders.js&quot;</span> ]
}</code></pre>
<p>As the above manifest references the emptyHeader.js file, we now need to implement that rule. We'll go ahead and use the same example rule that's defined above, placing it in the emptyHeader.js file in the same directory as the manifest that references it.</p>
<ul>
<li>Run <code>python -m SimpleHTTPServer</code> in the directory that contains manifest.json and exampleHeader.js</li>
<li>Next, open the options page for the FiveUI extension.</li>
<li>Make sure that the <code>Rule Sets</code> tab is selected</li>
<li>Click the <code>Add</code> button.</li>
<li>Paste http://localhost:8000/manifest.json into the address field</li>
<li>Click the save icon (a disk)</li>
</ul>
<p>You should now see an entry in the <code>Rule Sets</code> list that includes a <code>add url pattern</code> button.</p>
<h2 id="url-patterns">URL Patterns</h2>
<p><code>URL Patterns</code> can be added by the use of the <code>add url patterns</code> button on a rule set, and removed by clicking their <code>x</code> icon.</p>
<p><code>URL Patterns</code> represent the conditions in which a <code>Rule Set</code> will be applied to a page. To create a <code>URL Pattern</code> first make sure that you have created a <code>Rule Set</code> with the instructions above. Now you can enter a pattern in the text field above the <code>add url pattern</code> button, using the pattern language defined below.</p>
<h3 id="pattern-language">Pattern Language</h3>
<p>The <strong>pattern</strong> text in a <code>URL Pattern</code> uses the glob character *, to allow for a <code>URL Pattern</code> to apply to many URLs. For example, if you would like to design a pattern that applies to all of the <code>http</code> pages under the www.example.com domain, then you could use a pattern such as:</p>
<pre><code>http://www.example.com*</code></pre>
<p>Note that <code>URL Patterns</code> match the protocol, domain, port and path portions of the url, so the pattern above will not apply to <code>https</code> urls. The following pattern will apply to <em>any</em> site hosted at example.com:</p>
<pre><code>*example.com*</code></pre>
<h1 id="using-fiveui">Using FiveUI</h1>
<p>Once some <code>Rule Sets</code> and <code>URL Patterns</code> exist in the FiveUI configuration, the rules can be applied to a web page. Start off by navigating to a page that satisfies one of the <code>URL Patterns</code> defined in the FiveUI options page. If that URL is matched by one of the patterns, the FiveUI icon will change from gray to red, and an overlay will display the number of rule violations present on the page.</p>
<p>The primary user interface is hidden by default, to avoid obscuring the web page inadvertently. To show the list of problems, simply click on the FiveUI icon to make the window visible. The user interface is injected into the running page, and it should display on top of any other user interface elements present.</p>
<p>As the user navigates around sites that are matched by <code>URL Patterns</code>, the problem list will have newly occurring problems appended to it. All state in the dialog is maintained by the extension on a per-tab basis, so different browser tabs can have distinct lists of problems.</p>
<h2 id="problems">Problems</h2>
<p>Problem entries will be added to the FiveUI dialog as rules report problems on the page. Once a problem is reported, the user can click on the arrow to the left of the message to both expand the description of the problem, and to highlight the node of the DOM that is causing the problem. One caveat to this is that if the node that generated the problem exists on a page that has since been navigated away from, the node will obviously not be highlighted.</p>
<p>We illustrate this by first adding a new rule to our example Rule Set. This rule identifies headers that start with a lower-case letter.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{ <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Header Rule Set&quot;</span>
, <span class="st">&quot;description&quot;</span>: <span class="st">&quot;Simple rules about HTML headers.&quot;</span>
, <span class="st">&quot;rules&quot;</span>:
  [ <span class="st">&quot;lowerCase.js&quot;</span>, <span class="st">&quot;emptyHeaders.js&quot;</span> ]
}</code></pre>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">exports</span>.<span class="fu">name</span>        = <span class="st">&#39;Headers should be capitalized&#39;</span>;
<span class="ot">exports</span>.<span class="fu">description</span> = <span class="st">&#39;Heading elements should not start &#39;</span>
                    + <span class="st">&#39;with lowercase letters.&#39;</span>;
<span class="ot">exports</span>.<span class="fu">rule</span>        = <span class="kw">function</span>() {
  <span class="ot">fiveui</span>.<span class="fu">query</span>(<span class="st">&#39;:header&#39;</span>).<span class="fu">each</span>(<span class="kw">function</span>(ix, elt) {
    <span class="kw">if</span>( !<span class="ot">fiveui</span>.<span class="ot">word</span>.<span class="fu">capitalized</span>(<span class="fu">$</span>(elt).<span class="fu">text</span>()) ) {
      <span class="fu">report</span>(<span class="st">&#39;Heading is not capitalized&#39;</span>, elt);
    }
  });
};</code></pre>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="ot">exports</span>.<span class="fu">name</span>        = <span class="st">&#39;Empty Headers&#39;</span>;
<span class="ot">exports</span>.<span class="fu">description</span> = <span class="st">&#39;Heading elements should contain text.&#39;</span>;
<span class="ot">exports</span>.<span class="fu">rule</span>        = <span class="kw">function</span>() {
  <span class="ot">fiveui</span>.<span class="fu">query</span>(<span class="st">&#39;:header&#39;</span>).<span class="fu">each</span>(<span class="kw">function</span>(ix, elt) {
    <span class="kw">if</span>(<span class="fu">$</span>(elt).<span class="fu">text</span>() == <span class="st">&#39;&#39;</span>) {
      <span class="fu">report</span>(<span class="st">&#39;Heading does not contain text&#39;</span>, elt);
    }
  });
};</code></pre>
<p>This sample <code>Rule Set</code> demonstrates some new capabilities:</p>
<ul>
<li>Multiple rules in one Rule Set.</li>
<li>Multi-line descriptions.</li>
<li>The <code>fiveui.word.capitalized(...)</code> predicate, from the <code>FiveUI prelude</code>.</li>
</ul>
<p>The <code>FiveUI Prelude</code> is a small collection of utilities for creating rules.</p>
<p>Once adding this <code>Rule Set</code> specifying a <code>URL Pattern</code>, we can view violations in the FiveUI Problem List. Clicking on the <code>expand arrow</code> for a specific problem will highlight the element of the DOM that caused the violation.</p>
<div class="figure">
<img src="figures/ff-heading-highlight.png" alt="Expanding a Problem entry in the FiveUI Problem List highlights the element of the DOM that caused the violation." /><p class="caption">Expanding a Problem entry in the FiveUI Problem List highlights the element of the DOM that caused the violation.</p>
</div>
<h2 id="where-to-go-from-here">Where to go from here</h2>
<p>For more detail on the API available when writing new rules, see the <a href="../jsdoc/index.html">Javascript documentation</a>.</p>
<p><code>Headless</code> is a tool for automated rule set checking using FiveUI. To get started with Headless, see <a href="headlessFiveUI.html">Headless documentation</a>.</p>


    </div><!-- /.wrap -->
  </section><!-- /#content -->

  <footer>
    <div class="wrap">
      <nav id="footer-nav">
        <ul>
          <li><a href="http://corp.galois.com/contact/">Contact</a></li>
        </ul>
      </nav>

      <p>Copyright &copy; 2012 Galois, Inc. All rights reserved.</p>
    </div><!-- /.wrap -->
  </footer>
</body>
</html>
